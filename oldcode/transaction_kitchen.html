<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PL5GVMRBH9"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-PL5GVMRBH9');
    </script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DS58BG5N5D">
    </script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-DS58BG5N5D');
    </script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description"
        content="Give the gift of choice with your giftcards at GenZDealZ.ai. Perfect for any occasion, and redeemable for a variety of unforgettable experiences." />
    <meta name="author" content="" />
    <link rel="icon" href="https://genzdealz.ai/icons/logo_white_old.jpg" />

    <title>GenZDealZ.ai | Transaction : Deal Chahta Hai!? Your AI-based Student Discovery App</title>

    <meta name="twitter:card" content="GenZDealZ.ai_large_image" />
    <meta name="twitter:image" content="https://genzdealz.ai/icons/logo_white_old.jpg" />
    <!-- Other meta tags -->
    <meta property="og:title"
        content="GenZDealZ.ai | Transaction : Deal Chahta Hai!? Your AI-based Student Discovery App" />
    <meta property="og:description"
        content="Give the gift of choice with your giftcards at GenZDealZ.ai. Perfect for any occasion, and redeemable for a variety of unforgettable experiences." />
    <meta property="og:image" content="https://genzdealz.ai/icons/logo_white_old.jpg" />
    <meta property="og:url" content="https://genzdealz.ai/" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap"
        rel="stylesheet">
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <!-- Place your stylesheet here-->
    <!-- <script type="text/javascript" language="javascript">
        var versionUpdate = (new Date()).getTime();
        var link = document.createElement("link");
        link.href = "./css/style_new.css?v=" + versionUpdate;
        link.rel = "stylesheet"
        link.type = "text/css"
        document.head.appendChild(link);  
    </script> -->
    <link href="./css/style_new.css?v=1.1" rel="stylesheet" type="text/css" />
    <link href="./css/3D_card.css" rel="stylesheet" type="text/css" />
<style>
    .success-box {
      background: linear-gradient(145deg, #121212, #1d1d1f);
      border-radius: 35px;
      box-shadow: 0px 10px 15px rgba(0, 0, 0, 0.5);
      text-align: center;
      position: relative;
      overflow: hidden;
    }
</style>

</head>

<body class="position-relative">

    <special-header></special-header>

    <div class="margin" style="margin-bottom: 125px"><span></span></div>

    <main role="main" class="container mb-3" id="main" style="display: none;">

        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex">
                    <a href="/kitchen" class="text-white text-decoration-none ps-3"><i class="fa fa-arrow-left fs-2"></i></a>
                    <h2 class="mb-3 text-center heading text-white mx-auto">Culinary Career</h2>
                </div>
            </div>
            <div class="col-md-10 col-lg-6 mx-auto my-auto">
               <div class="success-box px-4 px-md-5 py-5">
                    <div class="">
                        <h1><i class="fa fa-check-circle me-2" style="color: green; font-size:100px;"></i></h1>
                    </div>
                    <div class="mt-3 mt-md-4">
                        <h2 id="name" class="text-white fw-bold"></h2>
                    </div>
                    <div>
                        <h5 class="text-white opacity-75 my-4 my-md-5">You have successfully enrolled in the Kitchen Helper Training Program.</p>
                    </div>
                    <div>
                        <div class="pt-3 text-center">
                            <a href="https://ihmgurukul.graphy.com/courses/Kitchen-Helper-Training-Program-636a27f6e4b0e1317724271a"
                                        class="fw-bold HOVER w-auto rounded-3 px-3 fs-4 me-4"><span></span><text>Click Here & Apply Promo Code: KITCHEN10</text> </a>
                        </div>
                    </div>

               </div>
                                                    

            </div>
    </div>
    

</main>
    <!-- Bootstrap Toast -->
    <div id="toastContainer" class="position-fixed bottom-0 end-0 p-3" style="z-index: 11;"></div>
    <!-- Bootstrap Modal HTML -->
    <!-- <div class="modal fade" id="paymentModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="paymentModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content border-0 rounded-4 contact-card" style="color: white;">
        <div class="modal-header border-0">
          <h5 class="modal-title" id="paymentModalLabel">Payment Successful</h5>
          <i id="closeButton" class="fa fa-close fs-4 ms-auto p-3 px-0 text-white" data-bs-dismiss="modal" aria-label="Close"
            style="cursor: pointer;"></i>
        </div>
        <div class="modal-body p-0 bg-transparent" id="appendData">

        </div>
        <div class="modal-footer border-0 justify-content-center">
          <a href="./giftcards" class="btn shadow w-75 rounded-5 border-0 text-white mb-3 fw-bold" style="
    background: linear-gradient( 135deg, rgb(66 151 184) 0%, rgb(0, 204, 255) 100% );
">Giftcards</a>
        </div>
      </div>
    </div>
  </div> -->
    <special-footer></special-footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
        integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/lz-string/libs/lz-string.min.js"></script> -->
    <!-- <script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script> -->
    <script src="./js/headerFooter.js" type="module"></script>
    <script src="./js/dynamic_dropdown.js?v=1.1" type="module"></script>
    <!-- <script type="text/javascript" language="javascript">

        var versionUpdate = (new Date()).getTime();
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = "./js/transaction.js?v=" + versionUpdate;
        document.body.appendChild(script);  
    </script> -->
    <script src="./js/3D_card.js"></script>
    <script>
        // Check if the user is authenticated
        if (localStorage.getItem('authenticated') === 'true') {
            // User is authenticated, allow access to the content
            
        } else {
            // User is not authenticated, redirect to the login page or handle accordingly
            window.location.href = './login';
        }
    </script>

    <script type="module">

const baseURL = window.location.origin;
        // Extract the 'data' parameter from the URL
        // Get data from local storage
        const transactionData = localStorage.getItem("transactionData");

        if (!transactionData) {
            console.error("No transaction data found in local storage.");
            window.open(`${baseURL}/kitchen`, "_self");
        } else {
            try {
                // Parse the JSON string
                const parsedData = JSON.parse(transactionData);
                // console.log("Retrieved Data:", parsedData);

                // Extract fields with preferred variable names
                const cfOrderId = parsedData.oid; // Cashfree Order ID
                const name = parsedData.name; // Name
                // Log the extracted data
                // console.log("Cashfree Order ID:", cfOrderId);
                // console.log("Operator ID:", operatorId);
                // console.log("Plan ID:", planId);
                // console.log("Mobile Number:", mNumber);
                // console.log("Plan Amount (Old):", planAmount);
                // console.log("Plan Amount (Discounted):", planAmountDiscounted);
                // console.log("Operator Name:", operatorName);
                // console.log("Operator Image:", operatorImage);
                // console.log("Circle Name:", circleName);
                // console.log("Circle ID:", circleId);
                // console.log("Data Benefit:", dataBenefit);
                // console.log("Validity:", validity);
                // console.log("Talktime:", talktime);
                // console.log("Cashback:", cashback);




                
                // const brandName = brndName;
                function replaceUnderscoresWithSpaces(str) {
                    return str.replace(/_/g, " ");
                }
                // Helper to display toast messages
                const toastContainer = document.getElementById("toastContainer");
                function showToast(message, isError = false) {
                    const toast = document.createElement("div");
                    toast.className = `toast align-items-center text-bg-${isError ? "danger" : "success"} border-0`;
                    toast.role = "alert";
                    toast.innerHTML = `
<div class="d-flex">
  <div class="toast-body">${message}</div>
  <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
</div>
`;
                    toastContainer.appendChild(toast);
                    const bsToast = new bootstrap.Toast(toast);
                    bsToast.show();
                    toast.addEventListener("hidden.bs.toast", () => toast.remove());
                }
                // Example usage:
                // let inputString = brndName;
                // let brandName = replaceUnderscoresWithSpaces(inputString);
                // Retrieve the authToken from local storage
                // const authToken = localStorage.getItem("authToken");
                // Check if the authToken is available
                // if (!authToken) {
                //   console.error("Authentication token not available");
                //   // Optionally, handle the absence of the token and inform the user
                // }
                // Retrieve user data from local storage
                const userDataString =
                    localStorage.getItem("userDataF") ||
                    localStorage.getItem("userDataA");

                if (!userDataString) {
                    console.error("User data not available in local storage");
                    // Optionally, handle the absence of user data and inform the user
                }

                // Parse user data from the string
                const userData = JSON.parse(userDataString);
                const mobileNumber =
                    userData?.number || userData.mobile_no || userData.phoneNumber; // Replace with your mobile number or get it dynamically


                // Check if there's an order ID in the URL
                if (cfOrderId) {
                    const storedOrderId = localStorage.getItem('initialOrderId');

                    if (storedOrderId) {
                        // proceedWithoutOrderId();                                  ////////////////////////// commennt later
                        // Compare the current order ID with the stored one
                        if (storedOrderId === cfOrderId) {
                            // console.log("Same order ID exists:", orderId);
                            window.open(`${baseURL}/kitchen`, "_self");               ////////////////////////// uncommennt later
                        } else {
                            localStorage.setItem('initialOrderId', cfOrderId);
                            // console.log("Order ID has changed.");
                            proceedWithoutOrderId();
                        }
                    } else {
                        // Store the initial order ID
                        localStorage.setItem('initialOrderId', cfOrderId);
                        // console.log("Initial order ID stored:", orderId);
                        proceedWithoutOrderId();
                    }
                } else {
                    // console.log("No order ID found in the URL.");
                }


                function proceedWithoutOrderId() {
                    // console.log("The page was not refreshed.");
                    const myHeaders0 = new Headers();
                    myHeaders0.append("ClientId", "604563f6486ad2386b8aa803bd365406");
                    myHeaders0.append("ClientSecret", "cfsk_ma_prod_223e71d012e3bdb4a2a0f3a64ba075fe_de980bbc");
                    myHeaders0.append("Version", "2023-08-01");
                    myHeaders0.append("Environment", "PRODUCTION");
                    myHeaders0.append("Content-Type", "application/json");


                    // test
                    // myHeaders0.append("ClientId", "TEST10096276ae5045bc4ef790b12f3a67269001");
                    // myHeaders0.append("ClientSecret", "cfsk_ma_test_22a935d0421c5ebad9c07ce62b347a03_718bb5d5");
                    // myHeaders0.append("Version", "2023-08-01");
                    // myHeaders0.append("Environment", "sandbox");
                    // myHeaders0.append("Content-Type", "application/json");

                    const raw0 = JSON.stringify({
                        "order_id": cfOrderId
                    });

                    const requestOptions = {
                        method: "POST",
                        headers: myHeaders0,
                        body: raw0,
                        redirect: "follow"
                    };

                    fetch("https://flashweb.iweberp.com/api/get_cashfree_payment_by_order", requestOptions)
                        .then((response) => {
                            if (!response.ok) {
                                throw new Error(`HTTP error! Status: ${response}`);
                            }
                            return response.json();
                        })
                        .then((result) => {
                            if (result.payment_status === "SUCCESS") {
                                // console.log(result.payment_status);
                                const greet = document.getElementById("name");
                                const main = document.getElementById("main");
                                greet.textContent = `Congratulations, ${name}!`;
                                main.style.display = "block";
                                $(".footer").show();
                                $(".overlay").hide();
                            }
                            else if (result.payment_status === "PENDING") {
                                console.log(result.payment_status)

                                window.open(`${baseURL}/kitchen`, "_self");
                            } else if (result.payment_status === "FAILURE") {
                                console.log(result.payment_status)

                                window.open(`${baseURL}/kitchen`, "_self");
                            } else {
                                window.open(`${baseURL}/kitchen`, "_self");
                            }
                        })
                        .catch((error) => {
                            console.error("Error:", error);
                            debugger

                            window.open(`${baseURL}/kitchen`, "_self");
                        });



                }
            } catch (error) {
                console.error("Error parsing transaction data:", error.message);
            }
        }




    </script>

    <script>

            $(document).ready(function(){       
                $("#overlay").hide();
                $(".footer").show();
            });
        //     document.cookie = "myCookie=myValue; SameSite=Lax";
        //     // var elements = document.querySelectorAll('.element');

        // setTimeout(function() {
        //     $('#myModal').modal('hide');
        // }, 5000);

    </script>
</body>

</html>