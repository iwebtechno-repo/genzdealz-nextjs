<!DOCTYPE html>
<html lang="en" class="position-relative">

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-PL5GVMRBH9"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-PL5GVMRBH9');
  </script>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-DS58BG5N5D">
  </script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-DS58BG5N5D');
  </script>
  <meta charset="utf-8" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="language" content="English">
  <meta name="revisit-after" content="1 days">

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <title>GenZDealZ.ai: Empowering GenZ through Agentic AI powered Deals.</title>
  <meta name="description"
    content="Catering brands & hyperlocal businesses to empower GenZ with customized deals powered by our GenAI platform." />
  <meta name="author" content="GenZDealZ.ai">
  <meta name="robots" content="index, follow">
  <meta name="keywords"
    content="AI-based App, Student Discovery App, Deals for Students, Student Coupons, Student Cashbacks, GenZDealZ, Student Discounts, Student Offers, Educational App, Learning App, Student Savings, Scholarship, Lending, Giftcards">


  <link rel="icon" href="https://genzdealz.ai/icons/logo_white_old.jpg" />



  <meta name="twitter:card" content="GenZDealZ.ai_large_image" />
  <meta name="twitter:image" content="https://genzdealz.ai/icons/logo_white_old.jpg" />
  <!-- Other meta tags -->
  <meta property="og:title" content="GenZDealZ.ai: Empowering GenZ through Agentic AI powered Deals." />
  <meta property="og:description"
    content="Catering brands & hyperlocal businesses to empower GenZ with customized deals powered by our GenAI platform." />
  <meta property="og:image" content="https://genzdealz.ai/icons/logo_white_old.jpg" />
  <meta property="og:site_name" content="GenZDealZ.ai" />
  <meta property="og:url" content="https://GenZDealZ.ai" />
  <meta name="target" content="students, college students, university students, high school students" />


  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap"
    rel="stylesheet">

  <link href="./css/style_new.css?v=1.2" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="./css/typo.css">
    <link rel="stylesheet" href="./css/component.css">

  <style>
    .scroll {
      position: relative;
      display: flex;
      flex-direction: row;
      flex-wrap: nowrap;
      align-items: center;
      /* width: 100%; */
      /* height: auto; */
      /* padding: 1rem 0; */
      /* margin: 2.5rem 0; */
      cursor: default;
      overflow: scroll hidden;
      -ms-scroll-snap-type: x mandatory;
      scroll-snap-type: x mandatory;
      scroll-padding: 0px 1.25rem;
      scrollbar-width: none;
    }

    .scroll::-webkit-scrollbar {
      display: none;
    }

    .scroll.active {
      cursor: grab;
      cursor: -webkit-grab;
    }


    /* .chatbot-btn:hover {
      color: #adabab !important;
      border: 1px solid #adabab !important;
    } */

    @media (max-width: 767px) {

      #chatbot-open-container {
        bottom: 85px !important;
      }

      #chatgpt-bot-open-container {
        bottom: 85px !important;
      }
    }

    
  </style>

</head>

<body class="">


  <special-header></special-header>

  <div class="margin" style="margin-bottom: 125px"><span></span></div>



  <img src="./icons/logo_white.png" alt="genz-logo" height="200px" width="200px" class="position-absolute"
    style="visibility: hidden; height: 200px; width: 200px;">
    <div class="topmenu rounded-pill py-2 py-lg-3 px-3">
      <div class="bar d-flex align-items-center justify-content-between justify-content-lg-center">
        <a href=".\personalized" class="active me-3 text-center nav-tabs rounded-pill"><i class="fa fa-heart d-block fs-4 d-lg-none"></i>Favourite</a>
        <a href=".\home" class="me-3 text-center nav-tabs text-nowrap rounded-pill text-black"><i class="fa fa-home d-block d-lg-none fs-4"></i>Home</a>
        <a href=".\recharge" class="me-3 text-center nav-tabs rounded-pill text-black"><i class="fa-solid fa-money-bill-trend-up d-block fs-4 d-lg-none"></i>Recharge & Bills</a>
        <a href=".\giftcards" class="me-3 text-center nav-tabs rounded-pill text-black"><i class="fa fa-wallet d-block fs-4 d-lg-none"></i>GiftCards</a>
      </div>
    </div>
  <div class="main" id="mainContent" style="padding-bottom: 80px;">

    <!----------------- Personalized ----------------->
    <div class="content active" style="display: none;" id="personalizedContent">
      <div class="container">
        <div class="row justify-content-center align-items-center">
          <div class="col-12 text-center">
            <h2 class="mb-3 text-center heading text-prim mx-auto fw-bold">Discover Deals With GenZGPT</h2>
          </div>
          <div class="col-xl-4 col-lg-5 col-md-6 col-sm-9 col-10 text-center position-relative">
            <img src="https://genzdealz.ai/images/GENZGPT.png" class="w-100" alt="">
            <button type="button"
              class="chatbot-btn h-auto w-auto btn btn-md shadow btn-prim mb-4 position-absolute"
              style="bottom: 5px; right: 20px; z-index: 1;">ðŸ‘‰Try It Now</button>
          </div>

        </div>
        <div class="row justify-content-center align-items-center">
          <div class="col-xl-5 text-end col-md-6 order-1 order-md-0">
            <img
              src="https://media.assettype.com/analyticsinsight%2Fimport%2Fwp-content%2Fuploads%2F2022%2F09%2FVirtual-Assistant_1-1.gif?w=1024&auto=format%2Ccompress&fit=max"
              class="w-100 rounded-5" alt="">
          </div>
          <div class="col-xl-4 col-md-6 text-center text-md-start order-0 order-md-1 mb-3 my-5 my-md-2">
            <h5>Canâ€™t find the right deals? Let GenZGPT, powered by ChatGPT, assist you in discovering personalized
              offers tailored just for you.</h5>
          </div>
        </div>

      </div>

    </div>
    <div class="container">
      <div class="row" id="deals-container"></div>
    </div>

  </div>

  <special-footer></special-footer>

  <special-chatbots></special-chatbots>



  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
    integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="./js/headerFooterNew.js" type="module"></script>
  <!-- <script src="./js/token.js" type="module"></script> -->
  <script type="module">
    import {
      auth, db,
      getDoc,
      doc,
      setDoc,
      onAuthStateChanged
    } from "/js/firebase_auth.js";

    onAuthStateChanged(auth, async (user) => {
      if (user) {
        // User is signed in, get the UID
        const uid = user.uid;

        // You can now use the UID as needed
        // For example, storing it in localStorage
        localStorage.setItem("userId", uid);

        try {
          // Reference to the user's document in Firestore
          const userDocRef = doc(db, "usersCollection", uid);

          // Fetch the user's document
          const userDocSnapshot = await getDoc(userDocRef);

          if (userDocSnapshot.exists()) {
            // Extract the user data from the document
            const userData = userDocSnapshot.data();

            // Retrieve userDataF from localStorage
            let userDataF = JSON.parse(localStorage.getItem("userDataF"));

            if (userDataF) {
              // Update the phone number and phone verification status
              userDataF.arthCode = userData.arthCode;

              // Store the updated userDataF back into localStorage
              localStorage.setItem("userDataF", JSON.stringify(userDataF));
            } else {
              console.error("userDataF not found in localStorage.");
            }
          } else {
            console.error("User document does not exist.");
          }
        } catch (error) {
          console.error("Error fetching user document:", error);
        }
      } else {
        // User is signed out
        // console.log("No user is signed in.");
      }
    });
  </script>
  <script>
    $(document).ready(function () {
      fetch('https://flashweb.iweberp.com/api/new_personalized_recommend', {
    method: 'GET', // Change to 'POST' if required
    headers: {
        'user_id': 'b58guEgu8dd8oiHf13gM7oWITwm1',
        'Content-Type': 'application/json' // Include if needed
    }
})
.then(response => response.json()) // Assuming the response is JSON
.then(data => console.log(data))
.catch(error => console.error('Error:', error));

      const referrer = document.referrer;
      console.log(referrer)
    const allowedDomains = ['https://genzdealz.ai', 'https://genzdealz.ai/index','https://genzdealz.ai/', 'https://genzdealz.ai/index/',
                           'https://unidealz.in', 'https://unidealz.in/index','https://unidealz.in/', 'https://unidealz.in/index/',
                          'http://127.0.0.1:5500', 'http://127.0.0.1:5500/index.html','http://127.0.0.1:5500/', 'http://127.0.0.1:5500/index.html/'];

    if (allowedDomains.includes(referrer)) {
        $("#chatbot-container").show();
    } else {
        $("#chatbot-container").hide(); // Optional
    }
      // welcomeText();
      welcomeText();
      class PersonalizedDeal {
        static fromJson(json) {
          return new PersonalizedDeal(json);
        }

        constructor(data) {
          this.title = data.Deal || 'Untitled Deal'; // Use 'Deal' from the API response
          this.description = data["Deal Description"] || 'No description available.'; // Use 'Deal Description'
          this.discount = data.Discount && !isNaN(data.Discount) ? data.Discount + "% Off" : 'Click for deal'; // Use 'Discount'
          this.url = data["Deal url "] || data["Deal url"] || '#'; // Use 'Deal url'
          this.image = data.Image || 'placeholder.jpg'; // Use 'Image' or fallback to a placeholder
        }
      }

      class PersonalizedDealsController {
        constructor() {
          this.dealsList = [];
          this.isLoading = false;
          this.errorMessage = '';
        }

        async fetchPersonalizedDeals() {
          this.isLoading = true;

          try {
            const userId = localStorage.getItem('userId');
            if (!userId) {
              this.errorMessage = 'User ID not found in local storage.';
              console.error(this.errorMessage);
              const personalizedContent = document.getElementById("personalizedContent");
              const chatBotBtn = document.getElementById("chatbot-open-container");
              personalizedContent.style.display = "block";
              chatBotBtn.classList.remove("d-flex")
              chatBotBtn.classList.add("d-none")
              $("#deals-container").hide();
              $("#overlay").hide();
              return;
            }
            const chatBotBtn = document.getElementById("chatbot-open-container");
            const personalizedContent = document.getElementById("personalizedContent");
            personalizedContent.style.display = "none";
            $("#chatbot-open-container").show();
            chatBotBtn.classList.remove("d-none")
            chatBotBtn.classList.add("d-flex")
            $("#deals-container").show();

            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 60000); // 60 seconds timeout

            // const response = await fetch('https://flashweb.iweberp.com/api/recommend', {
            const response = await fetch('https://flashweb.iweberp.com/api/personalized_recommend', {
              method: 'GET',
              headers: {
                'user_id': userId
              },
              signal: controller.signal
            });

            clearTimeout(timeoutId);

            if (response.ok) {
              const responseBody = await response.text();

              // Replace NaN with default value in the response body
              const sanitizedResponse = responseBody.replaceAll('"Discount":NaN', '"Discount":"Click for deal"');
              const jsonData = JSON.parse(sanitizedResponse);

              if (!jsonData.recommended_deals || !Array.isArray(jsonData.recommended_deals)) {
                console.warn('No deals found:', jsonData.message);
                this.errorMessage = jsonData.message || 'No deals found.';
                return;
              }

              this.dealsList = jsonData.recommended_deals.map(deal => PersonalizedDeal.fromJson(deal));
              // console.log(this.dealsList)
              this.drawDealCards();
            } else {
              const responseBody = await response.text();
              // console.log(responseBody);
              // Check if the responseBody contains the specific message
              if (responseBody === `{"message":"No deals found for user ID: ${userId}."}` ||
                responseBody.includes(`"message":"No deals found for user ID: ${userId}."`)) {
                this.errorMessage = `No deals found for user ID: ${userId}.`;
                // console.log(this.errorMessage);
                const personalizedContent = document.getElementById("personalizedContent");
                const chatBotBtn = document.getElementById("chatbot-open-container");
                personalizedContent.style.display = "block";
                chatBotBtn.classList.remove("d-flex")
                chatBotBtn.classList.add("d-none")
                $("#deals-container").hide();
                $("#overlay").hide();
                return;
              }
              if (response.status === 404) {
                this.errorMessage = `No deals found for your account: ${response.status}`;
                console.error(this.errorMessage);
              } else {
                this.errorMessage = `Failed to fetch deals: ${response.status}`;
                console.error(this.errorMessage);
              }
            }
          } catch (error) {
            if (error.name === 'AbortError') {
              this.errorMessage = 'Request timed out. Please try again.';
              console.error('Request timed out');
            } else {
              this.errorMessage = `Unexpected error: ${error.message}`;
              console.error('Unexpected error:', error);
            }
          } finally {
            this.isLoading = false;
          }
        }
        drawDealCards() {
          const dealsContainer = document.getElementById('deals-container');

          // Clear the existing cards before adding new ones
          dealsContainer.innerHTML = "";

          const heading = document.createElement('div');
          heading.classList.add('col-12', 'text-center');
          heading.innerHTML = `<h1 class="text-prim mb-4">Check out our personalized deals!</h1>`;
          dealsContainer.appendChild(heading);

          // Create a document fragment to avoid reflow and repaint for each card
          const fragment = document.createDocumentFragment();

          // Loop through the deals and create card elements
          this.dealsList.forEach(deal => {
            let updatedUrl = deal.url;

            // Check if the URL matches specific patterns and modify accordingly
            if (deal.url.includes("https://genzdealz.ai/sayf_store_detail")) {
              const url = new URL(deal.url); // Parse the URL
              const searchParams = url.search; // Extract the query string
              updatedUrl = `${window.location.origin}/brands_store_detail${searchParams}`;
              // console.log(updatedUrl)
            }
            // Create a card element
            const card = document.createElement('div');
            card.classList.add('deal-card', 'col-lg-4', 'col-xl-3');

            // Create content for the card, including an image if available
            card.innerHTML = `
          <div class="card mb-3 img-ratio justify-content-center align-items-center border-0 bot-message p-0 w-100">
            <div class="card-body p-0 bg-white d-flex rounded-4 w-100 h-100 position-relative outer-container">
              <a target="_self" class="position-relative p-0 h-100 d-block mx-auto w-100 text-center" href="${updatedUrl}">
                <img src="${deal.image}" alt="${deal.title}" class="deal-image h-100 w-100 rounded-4" style="object-fit: contain;" onerror="this.onerror=null;this.src='placeholder.jpg';"/>
                <div class="grad dark_edge"></div>
                <p class="position-absolute badge text-bg-danger px-2" style="border-radius: 0px 12px; top: 5px; right: 5px;">
                  ${deal.discount || 'Click for deal'}
                </p>
              </a>
              <div class="image_text text-white position-absolute fw-bold" style="bottom: 5px; left: 13px; z-index: 99;">
                <p class="m-0 fw-bold">${deal.title}</p>
              </div>
            </div>
          </div>
        `;

            // Append the card to the document fragment
            fragment.appendChild(card);

            $("#overlay").hide();
          });

          // Append the document fragment to the deals container (reduces reflows)
          dealsContainer.appendChild(fragment);
        }
      }
      // User ID exists, proceed to fetch personalized deals
      const controller = new PersonalizedDealsController();
      controller.fetchPersonalizedDeals();
      $(".close-chat-button, #close-chat-button").click(function () {
        $("#overlay").show();
        // $("#open-chat-button").toggle(200);
        //   $("#close-chat-button").toggle(200);
        //   $("#chatbot-container").fadeToggle(200);
        // User ID exists, proceed to fetch personalized deals
        const controller = new PersonalizedDealsController();
        controller.fetchPersonalizedDeals();
        //   $("#chatbot-container").fadeToggle(200);
        // Reload the current page
        // window.location.reload();
      });
    });

    // Helper function to adjust image ratios (16:9)
    function adjustImageRatios() {
      const imgRatios = document.querySelectorAll(".img-ratio");

      imgRatios.forEach(imgRatio => {
        const imgRatioWidth = imgRatio.offsetWidth;  // Get the width of the element
        const height = (imgRatioWidth * 9) / 16;     // Calculate height for 16:9 ratio
        imgRatio.style.height = `${height}px`;       // Set the height dynamically
      });

      // Recalculate aspect ratio when the window resizes
      window.addEventListener("resize", () => {
        imgRatios.forEach(imgRatio => {
          const imgRatioWidth = imgRatio.offsetWidth;
          const height = (imgRatioWidth * 9) / 16;
          imgRatio.style.height = `${height}px`;
        });
      });
    }
    adjustImageRatios();
    // Create a new MutationObserver
    const observer1 = new MutationObserver((mutationsList) => {
      for (let mutation of mutationsList) {
        if (mutation.type === 'childList' && mutation.addedNodes.length) {
          // Call adjustImageRatios when new nodes are added
          adjustImageRatios();
        }
      }
    });

    // Observe the chat output container for added nodes
    const dealsContainer = document.getElementById("deals-container");
    observer1.observe(dealsContainer, {
      childList: true,  // Listen for the addition/removal of child elements
      subtree: true     // Observe changes within all descendant elements
    });


    function redirectToAppropriateLink() {
      var downloadLink;
      // Check if the device is iOS
      if (isIOS()) {
        downloadLink = 'https://apps.apple.com/in/app/genzdealz-ai/id6504975486';
      } else {
        downloadLink = 'https://play.google.com/store/apps/details?id=iweb.student.marketplace&hl=en_IN&gl=US&pli=1';
      }
      // Update the href attribute of downloadApp link
      $('#downloadApp').attr('href', downloadLink);
    }
    function isIOS() {
      var userAgent = navigator.userAgent || navigator.vendor || window.opera;
      const iOS = /iPad|iPhone|iPod/.test(userAgent) && !window.MSStream;

      const macOS = /Mac/.test(userAgent) && !/iPhone|iPad|iPod/.test(userAgent);
      return iOS || macOS;
    }

    function reloadPage() {
      window.location.reload();
    }




  </script>
  <script src="./js/dynamic_dropdown.js?v=1.1" type="module"></script>
  <script src="./js/chatgpt.js"></script>


  <script>
    // Function to clear cache
    function clearCache() {
      // Clear cache
      window.location.reload(true);
    }

    // Function to check if cookie exists
    function checkCookie() {
      var cookieExists = document.cookie.indexOf("cacheCleared=true") !== -1;
      if (!cookieExists) {
        // Set cookie
        document.cookie = "cacheCleared=true; path=/";
        // Clear cache and open page
        clearCache();
      }
    }

    // Call checkCookie when the page loads
    checkCookie();
    // Check if the user is authenticated
    // if (localStorage.getItem('authenticated') === 'true') {
    // } else {
    //   window.location.href = 'login';
    // }



  </script>
</body>

</html>