<!DOCTYPE html>
<html lang="en" class="position-relative">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PL5GVMRBH9"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-PL5GVMRBH9');
    </script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DS58BG5N5D">
    </script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-DS58BG5N5D');
    </script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description"
        content="Unlock premium savings with SmarTab at GenZDealZ.ai! Explore exclusive discounts on subscriptions, memberships, and more. Elevate your lifestyle while saving big. Don't miss out – grab your SmarTab deal today!" />
    <meta name="author" content="" />
    <link rel="icon" href="https://genzdealz.ai/icons/logo_white_old.jpg" />

    <title>GenZDealZ.ai | Darwin - Somaiya Innovation & Impact Festival 2025</title>

    <meta name="twitter:card" content="GenZDealZ.ai_large_image" />
    <meta name="twitter:image" content="https://genzdealz.ai/icons/logo_white_old.jpg" />
    <!-- Other meta tags -->
    <meta property="og:title" content="GenZDealZ.ai | Darwin - Somaiya Innovation & Impact Festival 2025" />
    <meta property="og:description"
        content="Unlock premium savings with SmarTab at GenZDealZ.ai! Explore exclusive discounts on subscriptions, memberships, and more. Elevate your lifestyle while saving big. Don't miss out – grab your SmarTab deal today!" />
    <meta property="og:image" content="https://genzdealz.ai/icons/logo_white_old.jpg" />
    <meta property="og:url" content="https://genzdealz.ai/" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap"
        rel="stylesheet">
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">

    <!-- Place your stylesheet here-->
    <!-- <script type="text/javascript" language="javascript">
    var versionUpdate = (new Date()).getTime();
    var link = document.createElement("link");
    link.href = "./css/style_new.css?v=" + versionUpdate;
    link.rel = "stylesheet"
    link.type = "text/css"
    document.head.appendChild(link);  
  </script> -->
    <link href="./css/style_new.css?v=1.1" rel="stylesheet" type="text/css" />
    <link href="./css/3D_card.css" rel="stylesheet" type="text/css" />

    <style>
        label {
            padding-bottom: 8px;
            font-weight: 500;
        }

        .contact-card {
            background: #3b3b3b40;
        }

        input[type=file] {
            transition: border-color 0.25s ease-in-out;
        }

        input[type=file]::file-selector-button {
            padding: .4em 1.5em;
            border-width: 0;
            border-radius: 2em;
            background-color: #2e3192;
            color: #dbe6f0;
            transition: all 0.25s ease-in-out;
            cursor: pointer;
            margin-right: 1em;
        }

        .file-input__label {
            padding: .4em 1em;
            border-width: 0;
            border-radius: 2em;
            background-color: #2e3192;
            color: #dbe6f0;
            transition: all 0.25s ease-in-out;
            cursor: pointer;
            margin-right: 1em;
            width: fit-content;
            position: absolute;
            top: 0;
        }

        input[type=file]:hover {
            border-color: #888;
        }

        input[type=file]:hover::file-selector-button {
            /* background-color: #1f66ad;
   */
            opacity: .8;
        }

        .file-input__label svg {
            height: 16px;
            margin-right: 4px;
        }

        input:-webkit-autofill,
        .form-control,
        .form-select {
            -webkit-box-shadow: 0 0 0 1000px #1f1f1f inset !important;
            -webkit-text-fill-color: rgb(255, 255, 255) !important;
            color: rgb(255, 255, 255) !important;
            border-color: rgb(255, 255, 255);
        }

        .form-control:focus,
        .form-select:focus {
            border-color: rgb(255, 255, 255);
        }

        select option {
            color: #1b1464;
            background-color: #ffffff;
            border: 0;
        }

        .file-preview {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .text-truncate {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .accordion-button::after {
            filter: invert(1);
        }

        .accordion-button:not(.collapsed)::after {
            filter: none;
        }

        body {
            background-image: url(https://www.ecell.in/esummit/media/bg-1-IGAZBMQZ.jpg);
            width: 100%;
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }


        .moving-border {
            position: relative;
            background-image: url('https://www.ecell.in/esummit/media/bg-1-IGAZBMQZ.jpg');
            object-fit: cover;
            background-size: cover;
            background-attachment: fixed;
            background-blend-mode: lighten;
            background-position: center;
            /* background-color: #000000; */
            /* filter: blur(10px); */
        }

        .moving-border::before,
        .moving-border::after {
            content: "";
            position: absolute;
            inset: -0.2rem;
            z-index: -1;
            background: linear-gradient(var(--angle),
                    #c6247bde, #cee321);
            animation: rotate 3s linear infinite;
        }

        .moving-border::after {
            filter: blur(10px);
        }

        @keyframes rotate {
            0% {
                --angle: 0deg;
            }

            100% {
                --angle: 360deg;
            }
        }

        #darwinForm {

            background-color: #3b3b3b40;
            backdrop-filter: blur(3px);

        }

        .validation-error {
            color: red;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .error {
            border-color: red;
        }
    </style>
</head>

<body class="d-none">

    <special-header></special-header>

    <div class="margin" style="margin-bottom: 125px"><span></span></div>
    <div class="wrapper container-lg">
        <div class="row justify-content-center text-white text-start">
            <h2 class="text-center mb-4"><b style="color: #c6247bde;">Darwin</b> - Somaiya Innovation & Impact Festival
                2025
            </h2>
            <div class="col-12 text-md-center rounded-4 shadow-lg p-3"
                style="background-color: #32323282;backdrop-filter: blur(3px);">
                <p class="text-md-center" style="text-align: justify;">Darwin, an international conference at Somaiya
                    Innovation & Impact Festival,
                    invites researchers, students, and academicians to an immersive 3-day exploration of Sustainability
                    at Somaiya Vidyavihar University, Mumbai, from 19th to 22nd February 2025. Participate in hands-on
                    workshops, research lab tours, the Conscious Creators' Community, and more.</p>

                <ul class="d-md-flex justify-content-center fw-bold" style="color: #cee321;">
                    <li class="me-4">Registration Fee: ₹1,500</li>
                    <li>Application Deadline: 10th February 2025</li>
                </ul>
                <p>
                    <span class="d-block d-md-inline">For queries, contact apekshakumari@somaiya.edu or call +91 99672
                        19428.</span>
                    <span class="d-block d-md-inline"> Join us to shape a sustainable future together.</span>
                </p>
            </div>
        </div>
        <div class="row justify-content-center text-white text-start py-5">
            <div class="col-11 col-md-8 col-xl-6 mt-0 moving-border">

                <form id="darwinForm" class="row py-4">

                    <div class="col-12 col-md-12 mb-3">
                        <div class="d-flex flex-column">
                            <label for="name">Full Name <span class="text-danger">*</span></label>
                            <input class="form-control" type="text" id="name" name="name">
                        </div>
                    </div>
                    <div class="col-12 col-md-12 mb-3">
                        <div class="d-flex flex-column">
                            <label for="email">Email ID <span class="text-danger">*</span></label>
                            <input class="form-control" type="input" id="email" name="email">
                        </div>
                    </div>
                    <div class="col-12 col-md-12 mb-3">
                        <div class="d-flex flex-column">
                            <label for="contactNumber">Contact Number <span class="text-danger">*</span></label>
                            <input class="form-control" type="tel" id="contactNumber" name="contactNumber"
                                maxlength="10">
                        </div>
                    </div>
                    <div class="col-12 col-md-12 mb-3">
                        <div class="d-flex flex-column">
                            <label for="organization">University / Institute / Organization Name <span
                                    class="text-danger">*</span></label>
                            <textarea class="form-control" type="text" id="organization"
                                name="organization"> </textarea>
                        </div>
                    </div>
                    <div class="col-12 col-md-12 mb-3">
                        <div class="d-flex flex-column">
                            <label for="profession">Profession <span class="text-danger">*</span></label>
                            <select id="profession" class="form-select" name="profession">
                                <option value="">Select</option>
                                <option value="Student">Student</option>
                                <option value="Researcher">Researcher</option>
                                <option value="Startup Founder">Startup Founder</option>
                                <option value="Academician">Academician</option>
                                <option value="Other">Other</option>
                            </select>
                            <input type="text" id="professionOther" class="form-control mt-2" name="professionOther"
                                style="display: none;" placeholder="Please specify other profession" />
                        </div>
                    </div>
                    <div class="col-12 col-md-12 mb-3">
                        <div class="d-flex flex-column">
                            <label for="fieldOfStudy">Field of Study <span class="text-danger">*</span></label>
                            <textarea class="form-control" type="text" id="fieldOfStudy"
                                name="fieldOfStudy"> </textarea>
                        </div>
                    </div>
                    <div class="col-12 col-md-12 mb-3">
                        <label>Payment Confirmation <span class="text-danger">*</span></label>


                        <div class="d-flex flex-column file-input position-relative" id="paymentConfirmationUpload">
                            <input type="file" class="file-input__input" id="paymentConfirmation"
                                name="paymentConfirmation" accept="image/*,.pdf">
                            <label class="file-input__label" for="paymentConfirmation">
                                <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="upload"
                                    class="svg-inline--fa fa-upload fa-w-16" role="img"
                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                    <path fill="currentColor"
                                        d="M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z">
                                    </path>
                                </svg>
                                <span>Upload file</span></label>
                            <div class="accordion accordion-flush text-start mt-3" id="accordionFlushExample">
                                <div class="accordion-item rounded-3 shadow contact-card">
                                    <h2 class="accordion-header rounded-3" id="flush-headingOne">
                                        <button
                                            class="accordion-button collapsed rounded-3 border-0 text-white mb-0 contact-card p-2 px-3 fs-6 fw-semibold"
                                            type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne"
                                            aria-expanded="false" aria-controls="flush-collapseOne">
                                            Payment Instructions
                                        </button>
                                    </h2>
                                    <div id="flush-collapseOne" class="accordion-collapse collapse"
                                        aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
                                        <div class="accordion-body text-white small">
                                            <p>Please attach a screenshot of your payment done containing the
                                                transaction details.
                                            </p>

                                            <p>Registration Fees: INR 1,500 per individual</p>
                                            <p>Payment Details:</p>
                                            <ul>
                                                <li>UPI: riidlf@kotak</li>
                                                <li>Name: RESEARCH INNOVATION INCUBATION DESIGN LABORATORY FOUNDATION
                                                </li>
                                                <li>Bank Name: Kotak Mahindra Bank Ltd</li>
                                                <li>IFSC Code: KKBK0000635</li>
                                                <li>Account Type: Saving account</li>
                                                <li>Account Number: 8511784372</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>
                        <div id="paymentPreview">

                        </div>
                    </div>
                    <div class="col-12 col-md-12 mb-3 file-input">
                        <label>ID Proof <span class="text-danger">*</span></label>
                        <div class="d-flex flex-column position-relative" id="idProofUpload">
                            <input type="file" class="file-input__input" id="idProof" name="idProof"
                                accept="image/*,.pdf">
                            <label class="file-input__label" for="idProof">
                                <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="upload"
                                    class="svg-inline--fa fa-upload fa-w-16" role="img"
                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                    <path fill="currentColor"
                                        d="M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z">
                                    </path>
                                </svg>
                                <span>Upload file</span></label>
                            <div class="mt-3">
                                <p class="small m-0">Please attach your government-issued ID, such as Aadhar, PAN or
                                    your college ID.</p>
                            </div>
                        </div>

                        <div id="idProofPreview"></div>
                    </div>
                    <div class="col-12 col-md-12 mb-4">
                        <div class="d-flex flex-column">
                            <label for="suggestion">How did you hear about Darwin? <span
                                    class="text-danger">*</span></label>
                            <select id="suggestion" class="form-select" name="suggestion">
                                <option value="">Select</option>
                                <option value="Facebook">Facebook</option>
                                <option value="Instagram">Instagram</option>
                                <option value="Linkedin">Linkedin</option>
                                <option value="X">X</option>
                                <option value="Email">Email</option>
                                <option value="WhatsApp">WhatsApp</option>
                                <option value="GenZDealZ App">GenZDealZ App</option>
                                <option value="GenZDealZ Website">GenZDealZ Website</option>
                                <option value="Other">Other</option>
                            </select>
                            <input type="text" id="suggestionOther" class="form-control mt-2" name="suggestionOther"
                                style="display: none;" placeholder="Please specify other source" />
                        </div>
                    </div>
                    <div class="col-12 mb-3 mt-auto text-center">
                        <button class="btn fw-bold HOVER w-auto rounded-5 px-5 small me-2" id="editForm"
                            style="display: none;" type="button"><span></span><text>Edit</text></button>
                        <button class="btn fw-bold HOVER w-auto rounded-5 px-5 small ms-2"
                            type="submit"><span></span><text>Submit</text></button>

                    </div>
                </form>
            </div>
        </div>
        <!-- Toast Container -->
        <div id="toastContainer" class="position-fixed" style="bottom: 42px; right: 95px;"></div>

    </div>
    <special-footer></special-footer>
<special-chatbots></special-chatbots>
    <!-- Modal for File Preview -->
    <div class="modal fade" id="filePreviewModal" tabindex="-1" aria-labelledby="filePreviewModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="filePreviewModalLabel">File Preview</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img id="previewImage" src="" alt="File Preview" class="w-auto d-none" style="max-width: 100%;" />
                    <iframe id="previewPDF" class="w-100 d-none" height="400px" frameborder="0"></iframe>
                </div>
            </div>
        </div>
    </div>

    


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
        integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./js/headerFooter.js" type="module"></script>


    <script src="./js/firebase_auth.js" type="module"></script>
    <!-- <script src="./js/initialize.js?v=1.1" type="module"></script> -->
    <script src="./js/dynamic_dropdown.js?v=1.1" type="module"></script>


    <script src="./js/3D_card.js"></script>
    <script src="./js/chatgpt.js"></script>
    <script>

        // User is not authenticated, redirect to the login page or handle accordingly

        // if (localStorage.getItem('authenticated') !== 'true') {
        //     // Save the current URL
        //     const currentUrl = window.location.href;
        //     localStorage.setItem('redirectAfterLogin', currentUrl);
        //     window.location.href = 'login';
        // }
        $(document).ready(function () {
            // Save the current URL
            // const currentUrl = window.location.href;
            // localStorage.setItem('redirectAfterLogin', currentUrl);
            window.location.href = 'https://airtable.com/appRIJDnIdAnYsv0t/shrYuzlBARPysHaHH';

        });
    </script>
    <!-- <script>



        $(document).ready(function () {
            // Save the current URL
            // const currentUrl = window.location.href;
            // localStorage.setItem('redirectAfterLogin', currentUrl);
            window.location.href = 'https://airtable.com/appRIJDnIdAnYsv0t/shrYuzlBARPysHaHH';
            const input = document.querySelector("#contactNumber");
            function restrictToNumbers() {
                if (!input) return false; // Exit if input is not found
                input.value = input.value.replace(/\D/g, ""); // Remove any non-numeric characters
                return true; // Validation passed
            }
            input.addEventListener("input", restrictToNumbers);


            const userId = localStorage.getItem("userId");
            // Define the showToast function
            function showToast(message, type) {
                // Create a new toast element
                const toast = document.createElement("div");
                toast.className = `toast align-items-center text-bg-${type} border-0 show w-100 rounded-4`; // `type` determines the style (e.g., success, error)
                toast.role = "alert";
                toast.ariaLive = "assertive";
                toast.ariaAtomic = "true";

                // Add content to the toast
                toast.innerHTML = `
        <div class="d-flex justify-content-between align-items-center w-100 rounded-3" style="background-color: #323232;color:#cee321;">
            <div class="toast-body">${message}</div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
    `;

                // Get the toast container or create one if it doesn't exist
                let toastContainer = document.getElementById("toastContainer");
                if (!toastContainer) {
                    toastContainer = document.createElement("div");
                    toastContainer.id = "toastContainer";
                    toastContainer.className = "position-fixed p-3";
                    toastContainer.style.bottom = "42px";
                    toastContainer.style.right = "95px";
                    document.body.appendChild(toastContainer);
                }

                // Append the toast to the container
                toastContainer.appendChild(toast);

                // Automatically remove the toast after 5 seconds
                setTimeout(() => {
                    toast.remove();
                }, 5000);
            }

            // Listen for changes in the suggestion and profession dropdowns
            document.getElementById("suggestion").addEventListener("change", function () {
                toggleOtherInput(this, "suggestionOther");
            });

            document.getElementById("profession").addEventListener("change", function () {
                toggleOtherInput(this, "professionOther");
            });

            // Function to toggle the "Other" input field
            function toggleOtherInput(selectElement, inputId) {
                const otherInput = document.getElementById(inputId);
                if (selectElement.value === "Other") {
                    otherInput.style.display = "block";
                    otherInput.required = true; // Make it required when visible
                } else {
                    otherInput.style.display = "none";
                    otherInput.required = false; // Remove requirement when hidden
                }
            }
            document.getElementById("darwinForm").addEventListener("submit", function (event) {
                event.preventDefault(); // Prevent default form submission
                $("#overlay").show();
                $(".footer").hide();
                const form = event.target;
                const formData = new FormData();

                // Regular expressions for validation
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; // Basic email regex
                const phoneRegex = /^\d{10}$/; // Matches a 10-digit phone number

                let isValid = true; // Tracks overall form validity

                // Validation function
                function validateField(fieldId, validator, errorMessage) {
                    const field = form[fieldId];
                    if (!validator(field.value.trim())) {
                        showValidationError(fieldId, errorMessage);
                        isValid = false;
                    }
                }

                // Validate required text fields
                const requiredFields = [
                    { id: "name", message: "Please fill out the full name." },
                    { id: "email", message: "Please enter a valid email address.", validator: (value) => emailRegex.test(value) },
                    { id: "contactNumber", message: "Please enter a valid 10-digit phone number.", validator: (value) => phoneRegex.test(value) },
                    { id: "organization", message: "Please fill out the university / institute / organization name." },
                    { id: "profession", message: "Please select a profession." },
                    { id: "fieldOfStudy", message: "Please select a field of study." },
                    { id: "suggestion", message: "Please select a option." },
                ];

                requiredFields.forEach(({ id, message, validator = (value) => value }) => {
                    validateField(id, validator, message);
                });

                // Validate file inputs
                const paymentFile = document.getElementById("paymentConfirmation").files[0];
                if (!paymentFile) {
                    showValidationError("paymentConfirmation", "Please upload a payment confirmation file.");
                    isValid = false;
                }

                const idProofFile = document.getElementById("idProof").files[0];
                if (!idProofFile) {
                    showValidationError("idProof", "Please upload an ID proof file.");
                    isValid = false;
                }

                // If any validation fails, stop submission
                if (!isValid) return;

                // Combine "Other" inputs for suggestion and profession
                const suggestionValue = form.suggestion.value === "Other"
                    ? `Other | ${form.suggestionOther.value.trim()}`
                    : form.suggestion.value;

                const professionValue = form.profession.value === "Other"
                    ? `Other | ${form.professionOther.value.trim()}`
                    : form.profession.value;

                // Append validated data to FormData
                formData.append("userid", userId);
                formData.append("username", form.name.value.trim());
                formData.append("email", form.email.value.trim());
                formData.append("mobile_no", form.contactNumber.value.trim());
                formData.append("organisation", form.organization.value.trim());
                formData.append("profession", professionValue);
                formData.append("program", form.fieldOfStudy.value.trim());
                formData.append("payment_confirmation", paymentFile);
                formData.append("Id_proof", idProofFile);
                formData.append("suggestion", suggestionValue);
                formData.append("is_submit", "1");

                const requestOptions = {
                    method: "POST",
                    body: formData,
                    redirect: "follow",
                };

                // Sending data to the API
                fetch("https://flashweb.iweberp.com/api/AddDarwin", requestOptions)
                    .then((response) => {
                        if (!response.ok) {
                            return response.json().then((error) => {
                                throw new Error(error.error || "An error occurred.");
                            });
                        }
                        return response.json();
                    })
                    .then((result) => {
                        // console.log(result);
                        showToast("we shall get back to you shortly!", "success");
                        form.reset(); // Clear form fields
                        // Clear image cache by adding a cache-busting query parameter to the image sources
                        const paymentPreviewImage = document.getElementById("paymentPreview").querySelector("img");
                        const idProofPreviewImage = document.getElementById("idProofPreview").querySelector("img");

                        if (paymentPreviewImage) {
                            // Update the src URL by appending a cache-busting query parameter
                            paymentPreviewImage.src = paymentPreviewImage.src.split('?')[0] + "?t=" + new Date().getTime();
                        }

                        if (idProofPreviewImage) {
                            // Update the src URL by appending a cache-busting query parameter
                            idProofPreviewImage.src = idProofPreviewImage.src.split('?')[0] + "?t=" + new Date().getTime();
                        }
                        for (let pair of formData.entries()) {
                            // console.log(pair[0], pair[1]); // Verify data before sending
                        }
                        // Fetch updated data immediately after submission
                        setTimeout(() => {
                            fetchUpdatedData();
                        }, 5000); // Wait 3 seconds before fetching new data
                    })
                    .catch((error) => {
                        console.error("Error:", error.message);
                        showToast(`Error: ${error.message}`, "error");
                    });
            });


            function fetchUpdatedData() {
                fetch(`https://flashweb.iweberp.com/api/GetDarwinData?userid=${userId}&t=${new Date().getTime()}`)
                    .then(response => response.json())
                    .then(data => {
                        // console.log("Updated Data (After Delay):", data);
                        if (data.length > 0) {
                            fillFormData(data[0]); // Update form with new data
                            $("#overlay").hide();
                            $(".footer").show();
                        } else {
                            $("#overlay").hide();
                            $(".footer").show();
                            showToast("Please fill the form", "error");
                        }
                    })
                    .catch(error => {
                        console.error("Fetch Error:", error);
                        showToast("Error fetching updated data!", "error");
                    });
            }
            fetchUpdatedData();
            $("#overlay").hide();
            $(".footer").show();
        });

        function fillFormData(data) {
            // showToast(`${data.Username} your information fetched Successfully!`, "success");
            const form = document.getElementById("darwinForm");

            // Fill text fields
            form.name.value = data.Username || "";
            form.email.value = data.Email || "";
            form.contactNumber.value = data.MobileNo || "";
            form.organization.value = data.Organisation || "";
            form.fieldOfStudy.value = data.Program || "";
            form.suggestion.value = data.Suggestion && data.Suggestion.startsWith("Other |") ? "Other" : data.Suggestion || "";
            form.profession.value = data.Profession && data.Profession.startsWith("Other |") ? "Other" : data.Profession || "";

            // Check if "Other |" is included in Profession and Suggestion and populate "Other" inputs
            if (data.Profession && data.Profession.startsWith("Other |")) {
                const professionOtherInput = document.getElementById("professionOther");
                professionOtherInput.style.display = "block";
                professionOtherInput.value = data.Profession.split("Other |")[1].trim(); // Populate with text after "Other |"
            } else {
                document.getElementById("professionOther").style.display = "none";
            }

            if (data.Suggestion && data.Suggestion.startsWith("Other |")) {
                const suggestionOtherInput = document.getElementById("suggestionOther");
                suggestionOtherInput.style.display = "block";
                suggestionOtherInput.value = data.Suggestion.split("Other |")[1].trim(); // Populate with text after "Other |"
            } else {
                document.getElementById("suggestionOther").style.display = "none";
            }


            // Disable all form fields and show edit button
            disableFormFields();

            // Preview payment file
            const paymentPreview = document.getElementById("paymentPreview");
            if (data.PaymentConfirmationPath) {
                const paymentConfirmationUpload = document.getElementById("paymentConfirmationUpload");
                paymentConfirmationUpload.classList.add("d-none");
                createFilePreview(paymentPreview, data.PaymentConfirmationPath, "paymentConfirmation");
            }

            // Preview ID proof
            const idProofPreview = document.getElementById("idProofPreview");
            if (data.IdProofPath) {
                const idProofUpload = document.getElementById("idProofUpload");
                idProofUpload.classList.add("d-none");
                createFilePreview(idProofPreview, data.IdProofPath, "idProof");
            }

            // Show Edit Button
            document.getElementById("editForm").style.display = "inline-block";
        }

        function disableFormFields() {
            const form = document.getElementById("darwinForm");
            const fields = form.querySelectorAll("input, select, textarea");
            fields.forEach(field => {
                field.disabled = true;
            });
        }

        function enableFormFields() {
            const form = document.getElementById("darwinForm");
            const fields = form.querySelectorAll("input, select, textarea");
            fields.forEach(field => {
                field.disabled = false;
            });
            document.getElementById("paymentConfirmationUpload").classList.remove("d-none");
            document.getElementById("idProofUpload").classList.remove("d-none");
        }

        document.getElementById("editForm").addEventListener("click", function () {
            enableFormFields();
            document.getElementById("editForm").style.display = "none";
            document.getElementById("paymentPreview").innerHTML = "";
            document.getElementById("idProofPreview").innerHTML = "";
        });

        // Helper function to create a preview block
        function createFilePreview(previewContainer, fileUrl, inputId) {
            previewContainer.innerHTML = `
                <div class="file-preview">
                    <span class="text-truncate">${fileUrl.split("/").pop()}</span>
                    <button class="btn btn-link p-0 text-decoration-none" type="button" onclick="openFileInModal('${fileUrl}')">
                        View
                    </button>
                </div>
            `;
            document.getElementById(inputId).dataset.fileUrl = fileUrl; // Store file URL for modal preview
        }

        // Open file in modal
        function openFileInModal(fileUrl) {
            const previewImage = document.getElementById("previewImage");
            const previewPDF = document.getElementById("previewPDF");

            if (fileUrl.endsWith(".pdf")) {
                previewImage.classList.add("d-none");
                previewPDF.classList.remove("d-none");
                previewPDF.src = fileUrl;
            } else {
                previewPDF.classList.add("d-none");
                previewImage.classList.remove("d-none");
                previewImage.src = fileUrl;
            }

            const filePreviewModal = new bootstrap.Modal(document.getElementById("filePreviewModal"));
            filePreviewModal.show();
        }

        function showValidationError(fieldId, message) {
            const field = document.getElementById(fieldId);

            // Check if an error message already exists
            if (field && field.nextElementSibling?.classList.contains("validation-error")) {
                return; // Prevent duplicate error messages
            }

            const errorElement = document.createElement("div");
            errorElement.className = "validation-error";
            errorElement.textContent = message;

            // Add the error message after the field
            if (field) {
                field.parentNode.insertBefore(errorElement, field.nextSibling);
            }

            // Highlight the field with an error
            field.classList.add("error");

            // Remove error message and highlighting on input
            field.addEventListener("input", () => {
                if (field.nextElementSibling?.classList.contains("validation-error")) {
                    field.nextElementSibling.remove();
                }
                field.classList.remove("error");
            });
        }



    </script> -->



</body>

</html>